<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, minimal-ui"/><title>Creating a radio station on a Raspberry Pi using DarkIce and IceCast2</title><meta name="next-head-count" content="3"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/54586fbf59b60d43.css" as="style"/><link rel="stylesheet" href="/_next/static/css/54586fbf59b60d43.css" data-n-g=""/><link rel="preload" href="/_next/static/css/8f46b4f7600beece.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8f46b4f7600beece.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-59c5c889f52620d6.js" defer=""></script><script src="/_next/static/chunks/framework-ecc4130bc7a58a64.js" defer=""></script><script src="/_next/static/chunks/main-f61746aa183f4a64.js" defer=""></script><script src="/_next/static/chunks/pages/_app-97a8db791b55d716.js" defer=""></script><script src="/_next/static/chunks/9f96d65d-c4282c10dbede9d8.js" defer=""></script><script src="/_next/static/chunks/257-27db30c4d5495980.js" defer=""></script><script src="/_next/static/chunks/891-9a51b091cb651577.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5BdirName%5D-63c4d3d87152bc5f.js" defer=""></script><script src="/_next/static/7OY4XuuuRhnsG531U7OpM/_buildManifest.js" defer=""></script><script src="/_next/static/7OY4XuuuRhnsG531U7OpM/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Roboto:wght@400;500;700&display=swap">@font-face{font-family:'Lato';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/lato/v24/S6uyw4BMUTPHvxo.woff) format('woff')}@font-face{font-family:'Lato';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/lato/v24/S6u9w4BMUTPHh6UVeww.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Me5g.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9vAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlvAA.woff) format('woff')}@font-face{font-family:'Lato';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/lato/v24/S6uyw4BMUTPHjxAwXiWtFCfQ7A.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Lato';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/lato/v24/S6uyw4BMUTPHjx4wXiWtFCc.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Lato';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/lato/v24/S6u9w4BMUTPHh6UVSwaPGQ3q5d0N7w.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Lato';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/lato/v24/S6u9w4BMUTPHh6UVSwiPGQ3q5d0.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu72xKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu5mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7GxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><style>
    #nprogress {
      pointer-events: none;
    }
    #nprogress .bar {
      background: #006ad5;
      position: fixed;
      z-index: 9999;
      top: 0;
      left: 0;
      width: 100%;
      height: 3px;
    }
    #nprogress .peg {
      display: block;
      position: absolute;
      right: 0px;
      width: 100px;
      height: 100%;
      box-shadow: 0 0 10px #006ad5, 0 0 5px #006ad5;
      opacity: 1;
      -webkit-transform: rotate(3deg) translate(0px, -4px);
      -ms-transform: rotate(3deg) translate(0px, -4px);
      transform: rotate(3deg) translate(0px, -4px);
    }
    #nprogress .spinner {
      display: block;
      position: fixed;
      z-index: 1031;
      top: 15px;
      right: 15px;
    }
    #nprogress .spinner-icon {
      width: 18px;
      height: 18px;
      box-sizing: border-box;
      border: solid 2px transparent;
      border-top-color: #006ad5;
      border-left-color: #006ad5;
      border-radius: 50%;
      -webkit-animation: nprogresss-spinner 400ms linear infinite;
      animation: nprogress-spinner 400ms linear infinite;
    }
    .nprogress-custom-parent {
      overflow: hidden;
      position: relative;
    }
    .nprogress-custom-parent #nprogress .spinner,
    .nprogress-custom-parent #nprogress .bar {
      position: absolute;
    }
    @-webkit-keyframes nprogress-spinner {
      0% {
        -webkit-transform: rotate(0deg);
      }
      100% {
        -webkit-transform: rotate(360deg);
      }
    }
    @keyframes nprogress-spinner {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }
  </style><div id="PostPage" class="page"><div class="box"><header><a class="cursor-pointer hover:underline text-black" href="/"><h2 class="font-accent font-bold text-2xl">Alexandru Prisacariu</h2></a><div class="mt-2 flex gap-2 flex-wrap"><a class="hover:no-underline" href="/"><div class="px-2 py-1 border border-[#3366cc] bg-white hover:border-[#24478f] hover:bg-[#ebf0fa]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="home_svg__icon home_svg__icon-tabler home_svg__icon-tabler-home"><path stroke="none" d="M0 0h24v24H0z"></path><path d="M5 12H3l9-9 9 9h-2M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-7"></path><path d="M9 21v-6a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v6"></path></svg></div></a><a class="hover:no-underline" href="/about_me"><div class="px-2 py-1 border border-[#3366cc] bg-white hover:border-[#24478f] hover:bg-[#ebf0fa]">About me</div></a><a class="hover:no-underline" href="/projects"><div class="px-2 py-1 border border-[#3366cc] bg-white hover:border-[#24478f] hover:bg-[#ebf0fa]">Projects</div></a><a class="hover:no-underline" href="/blog/1"><div class="px-2 py-1 border border-[#3366cc] bg-white hover:border-[#24478f] hover:bg-[#ebf0fa]">Blog</div></a><a class="hover:no-underline" href="/cv"><div class="px-2 py-1 border border-[#3366cc] bg-white hover:border-[#24478f] hover:bg-[#ebf0fa]">Resume/CV</div></a></div></header><main class="mt-8 flex flex-col"><a class="text-indigo-700" href="/blog/1">&lt; See more posts</a><h1 class="text-4xl mt-1 mb-2">Creating a radio station on a Raspberry Pi using DarkIce and IceCast2</h1><div class="flex flex-col md:flex-row md:items-center mb-8 md:space-x-3"><div>12 March 2022</div><div class="flex gap-1 flex-wrap"><a class="hover:no-underline cursor-pointer" href="/posts/post009_creating_a_radio_station_on_a_raspberry_pi_using_darkice_and_icecast2#"><div class="text-sm px-1 text-white bg-blue-500 hover:bg-blue-400">#Linux</div></a><a class="hover:no-underline cursor-pointer" href="/posts/post009_creating_a_radio_station_on_a_raspberry_pi_using_darkice_and_icecast2#"><div class="text-sm px-1 text-white bg-blue-500 hover:bg-blue-400">#Raspberry Pi</div></a><a class="hover:no-underline cursor-pointer" href="/posts/post009_creating_a_radio_station_on_a_raspberry_pi_using_darkice_and_icecast2#"><div class="text-sm px-1 text-white bg-blue-500 hover:bg-blue-400">#Ubuntu</div></a><a class="hover:no-underline cursor-pointer" href="/posts/post009_creating_a_radio_station_on_a_raspberry_pi_using_darkice_and_icecast2#"><div class="text-sm px-1 text-white bg-blue-500 hover:bg-blue-400">#Audio</div></a></div></div><div class="postContent flex flex-col"><p>At my church we offer translations to people who cannot speak romanian, but the
system we are using is pretty low quality and is a lot of static noise and is
too expensive to upgrade it.</p>
<p>So I&#x27;ve thinked I would be able to use a Raspberry Pi 3, an audio interface and
some software to create a radio station that would then be hooked to the actual
system.</p>
<p>After searching for some software that would work on Raspberry Pi 3 I
discovered <code>IceCast2</code> that would be able to create a radio station and using
<code>DarkIce</code> to send the live audio from the microphone to <code>IceCast2</code>.</p>
<p>So I&#x27;ve booted <code>Ubuntu 20.04</code> for Raspberry Pi and installed <code>icecast2</code> from the
package manager.
For the <code>darkice</code> the version from the package manager was <strong>1.13</strong>, but the
latest available is <strong>1.14</strong> so I needed to compile it.  After some tries and
searching and found that needed to install <code>ALSA</code> and compile another library,
<code>lame</code>, because could not figure out how to configure <code>darkice</code> to use the
developer package from the package manager I figure it out and built the latest
version of <code>darkice</code>.</p>
<p>After playing out with both the <code>darkice</code> configuration and the <code>icecast2</code>
configuration I had a working radio station.
The only problem that I couldn&#x27;t anticipated was that the latency was just too
high for what I needed. I had around <strong>5 to 10 seconds</strong> of latency, which would
be quite perfect for a normal radio station, but not what I needed.</p>
<p>So here are the complet steps that I followed:</p>
<div class="remark-highlight"><pre class="language-bash  line-numbers"><code class="language-bash"><span class="token comment"># Installing icecast2</span>
<span class="token comment"># Installing ALSA utilities</span>
<span class="token comment"># Installing pkgconfig required for `darkice` configuration</span>
<span class="token comment"># Installing build-essentials for compiling `darkice` and `lame`</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> icecast2 alsa-utils asound2 libasound2-dev pkgconfig build-essentials

<span class="token comment"># Getting lame</span>
<span class="token function">wget</span> <a href="https://sourceforge.net/projects/lame/files/lame/3.100/lame-3.100.tar.gz" class="token url-link">https://sourceforge.net/projects/lame/files/lame/3.100/lame-3.100.tar.gz</a>
<span class="token function">tar</span> <span class="token parameter variable">-xvf</span> lame-3.100.tar.gz
<span class="token builtin class-name">cd</span> lame-3.100

<span class="token comment"># Configuring lame and building it</span>
./configure --with-fileio<span class="token operator">=</span>lame --disable-gtktest --enable-expopt<span class="token operator">=</span>full <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr
<span class="token function">make</span>
<span class="token function">sudo</span> <span class="token function">make</span> <span class="token function">install</span>

<span class="token comment"># Getting darkice</span>
<span class="token function">wget</span> <a href="https://github.com/rafael2k/darkice/releases/download/v1.4/darkice-1.4.tar.gz" class="token url-link">https://github.com/rafael2k/darkice/releases/download/v1.4/darkice-1.4.tar.gz</a>
<span class="token function">tar</span> <span class="token parameter variable">-xvf</span> darkice-1.4.tar.gz
<span class="token builtin class-name">cd</span> darkice-1.4

<span class="token comment"># Configuring darkice with ALSA and lame and building it</span>
./configure --with-alsa --with-lame
<span class="token function">make</span>
<span class="token function">sudo</span> <span class="token function">make</span> <span class="token function">install</span><span aria-hidden="true" class="line-numbers-rows"><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span></span>
</code></pre></div>
<p>I&#x27;ve used the default <strong>hackme</strong> password when I&#x27;ve installed <code>icecast2</code>.</p>
<p>The config for <code>icecast2</code> can be found at <code>/etc/icecast2/icecast.xml</code>.</p>
<p>The configuration for <code>darkice</code> saved in <code>~/darkice.cfg</code>:</p>
<div class="remark-highlight"><pre class="language-bash  line-numbers"><code class="language-bash"><span class="token comment"># this section describes general aspects of the live streaming session </span>
<span class="token punctuation">[</span>general<span class="token punctuation">]</span> 
duration     <span class="token operator">=</span> <span class="token number">0</span>     <span class="token comment"># duration of encoding, in seconds. 0 means forever </span>
bufferSecs   <span class="token operator">=</span> <span class="token number">5</span>     <span class="token comment"># size of internal slip buffer, in seconds </span>
reconnect    <span class="token operator">=</span> <span class="token function">yes</span>   <span class="token comment"># reconnect to the server(s) if disconnected </span>
<span class="token comment"># this section describes the audio input that will be streamed </span>
<span class="token punctuation">[</span>input<span class="token punctuation">]</span> 
device          <span class="token operator">=</span> plughw:1,0  <span class="token comment"># Soundcard device for the audio input </span>
sampleRate      <span class="token operator">=</span> <span class="token number">22050</span>     <span class="token comment"># sample rate in Hz. try 11025, 22050 or 44100 </span>
bitsPerSample   <span class="token operator">=</span> <span class="token number">16</span>        <span class="token comment"># bits per sample. try 16 </span>
channel         <span class="token operator">=</span> <span class="token number">1</span>         <span class="token comment"># channels. 1 = mono, 2 = stereo </span>
<span class="token comment"># this section describes a streaming connection to an IceCast2 server </span>
<span class="token comment"># there may be up to 8 of these sections, named [icecast2-0] ... [icecast2-7] </span>
<span class="token punctuation">[</span>icecast2-0<span class="token punctuation">]</span> 
bitrateMode     <span class="token operator">=</span> abr       <span class="token comment"># average bit rate </span>
<span class="token function">format</span>          <span class="token operator">=</span> mp3       <span class="token comment"># format of the stream: ogg vorbis </span>
bitrate         <span class="token operator">=</span> <span class="token number">86</span>        <span class="token comment"># bitrate of the stream sent to the server </span>
server          <span class="token operator">=</span> localhost <span class="token comment"># host name of the server </span>
port            <span class="token operator">=</span> <span class="token number">8000</span>      <span class="token comment"># port of the IceCast2 server, usually 8000 </span>
password        <span class="token operator">=</span> hackme 
mountPoint      <span class="token operator">=</span> Stream.mp3  <span class="token comment"># mount point of this stream on the IceCast2 server </span>
name            <span class="token operator">=</span> Raspberry Pi Stream <span class="token comment"># name of the stream </span>
description     <span class="token operator">=</span> Broadcast from Raspberry Pi <span class="token comment"># description of the stream </span>
<span class="token comment">#public          = yes       advertise this stream?</span><span aria-hidden="true" class="line-numbers-rows"><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span></span>
</code></pre></div>
<p>To found out the right device you can run arecord -l and will return all the
recording devices available. The card index is the first number, in my case 1
and the device index is the second number, in my case 0.</p>
<p>The password field is the source-password from the icecast2  config.</p>
<p>And now, for starting everything we need first to start icecast2 by starting
its service:</p>
<div class="remark-highlight"><pre class="language-bash  line-numbers"><code class="language-bash"><span class="token function">sudo</span> systemctl start icecast2<span aria-hidden="true" class="line-numbers-rows"><span class=""></span></span>
</code></pre></div>
<p>And then we run darkice with our config file:</p>
<div class="remark-highlight"><pre class="language-bash  line-numbers"><code class="language-bash"><span class="token function">sudo</span> darkice <span class="token parameter variable">-c</span> ~/darkice.cfg<span aria-hidden="true" class="line-numbers-rows"><span class=""></span></span>
</code></pre></div>
<p>You can also create a service for darkice replacing the username with your
account username (line 8 and 14):</p>
<div class="remark-highlight"><pre class="language-bash  line-numbers"><code class="language-bash"><span class="token comment"># /etc/systemd/system/darkice.service</span>
<span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
<span class="token assign-left variable">Description</span><span class="token operator">=</span>Darkice <span class="token function">service</span>
After <span class="token operator">=</span> network-online.target sound.target

<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
<span class="token assign-left variable">Type</span><span class="token operator">=</span>simple
<span class="token assign-left variable">User</span><span class="token operator">=</span>ubuntu
<span class="token assign-left variable">ExecStartPre</span><span class="token operator">=</span>/bin/sleep <span class="token number">5</span>
<span class="token assign-left variable">StandardOutput</span><span class="token operator">=</span>syslog
<span class="token assign-left variable">StandardError</span><span class="token operator">=</span>syslog
<span class="token assign-left variable">SyslogIdentifier</span><span class="token operator">=</span>darkice
<span class="token assign-left variable">WorkingDirectory</span><span class="token operator">=</span>/
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/local/bin/darkice <span class="token parameter variable">-c</span> /home/ubuntu/darkice.cfg
<span class="token assign-left variable">Restart</span><span class="token operator">=</span>on-abort
<span class="token assign-left variable">CPUSchedulingPolicy</span><span class="token operator">=</span>fifo
<span class="token assign-left variable">CPUSchedulingPriority</span><span class="token operator">=</span><span class="token number">4</span>

<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
<span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target<span aria-hidden="true" class="line-numbers-rows"><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span><span class=""></span></span>
</code></pre></div></div></main></div></div><footer class="mt-2 mb-4"><div class="box">Â© <!-- -->2024<!-- --> Alexandru Prisacariu | Powered by<!-- --> <a class="text-black underline" target="_blank" rel="noreferrer noopener" href="https://nextjs.org">NextJS</a>,<!-- --> <a class="text-black underline" target="_blank" rel="noreferrer noopener" href="https://github.com">GitHub</a></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"Creating a radio station on a Raspberry Pi using DarkIce and IceCast2","tags":["Linux","Raspberry Pi","Ubuntu","Audio"],"publishedOn":"2022-03-12T16:36:45.620Z","dirName":"post009_creating_a_radio_station_on_a_raspberry_pi_using_darkice_and_icecast2","content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    code: \"code\",\n    strong: \"strong\",\n    div: \"div\",\n    pre: \"pre\",\n    span: \"span\",\n    a: \"a\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: \"At my church we offer translations to people who cannot speak romanian, but the\\r\\nsystem we are using is pretty low quality and is a lot of static noise and is\\r\\ntoo expensive to upgrade it.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"So I've thinked I would be able to use a Raspberry Pi 3, an audio interface and\\r\\nsome software to create a radio station that would then be hooked to the actual\\r\\nsystem.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"After searching for some software that would work on Raspberry Pi 3 I\\r\\ndiscovered \", _jsx(_components.code, {\n        children: \"IceCast2\"\n      }), \" that would be able to create a radio station and using\\r\\n\", _jsx(_components.code, {\n        children: \"DarkIce\"\n      }), \" to send the live audio from the microphone to \", _jsx(_components.code, {\n        children: \"IceCast2\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"So I've booted \", _jsx(_components.code, {\n        children: \"Ubuntu 20.04\"\n      }), \" for Raspberry Pi and installed \", _jsx(_components.code, {\n        children: \"icecast2\"\n      }), \" from the\\r\\npackage manager.\\r\\nFor the \", _jsx(_components.code, {\n        children: \"darkice\"\n      }), \" the version from the package manager was \", _jsx(_components.strong, {\n        children: \"1.13\"\n      }), \", but the\\r\\nlatest available is \", _jsx(_components.strong, {\n        children: \"1.14\"\n      }), \" so I needed to compile it.  After some tries and\\r\\nsearching and found that needed to install \", _jsx(_components.code, {\n        children: \"ALSA\"\n      }), \" and compile another library,\\r\\n\", _jsx(_components.code, {\n        children: \"lame\"\n      }), \", because could not figure out how to configure \", _jsx(_components.code, {\n        children: \"darkice\"\n      }), \" to use the\\r\\ndeveloper package from the package manager I figure it out and built the latest\\r\\nversion of \", _jsx(_components.code, {\n        children: \"darkice\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"After playing out with both the \", _jsx(_components.code, {\n        children: \"darkice\"\n      }), \" configuration and the \", _jsx(_components.code, {\n        children: \"icecast2\"\n      }), \"\\r\\nconfiguration I had a working radio station.\\r\\nThe only problem that I couldn't anticipated was that the latency was just too\\r\\nhigh for what I needed. I had around \", _jsx(_components.strong, {\n        children: \"5 to 10 seconds\"\n      }), \" of latency, which would\\r\\nbe quite perfect for a normal radio station, but not what I needed.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"So here are the complet steps that I followed:\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-bash  line-numbers\",\n        children: _jsxs(_components.code, {\n          className: \"language-bash\",\n          children: [_jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# Installing icecast2\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# Installing ALSA utilities\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# Installing pkgconfig required for `darkice` configuration\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# Installing build-essentials for compiling `darkice` and `lame`\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"sudo\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"apt\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"install\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token parameter variable\",\n            children: \"-y\"\n          }), \" icecast2 alsa-utils asound2 libasound2-dev pkgconfig build-essentials\\n\\n\", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# Getting lame\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"wget\"\n          }), \" \", _jsx(_components.a, {\n            href: \"https://sourceforge.net/projects/lame/files/lame/3.100/lame-3.100.tar.gz\",\n            className: \"token url-link\",\n            children: \"https://sourceforge.net/projects/lame/files/lame/3.100/lame-3.100.tar.gz\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"tar\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token parameter variable\",\n            children: \"-xvf\"\n          }), \" lame-3.100.tar.gz\\n\", _jsx(_components.span, {\n            className: \"token builtin class-name\",\n            children: \"cd\"\n          }), \" lame-3.100\\n\\n\", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# Configuring lame and building it\"\n          }), \"\\n./configure --with-fileio\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \"lame --disable-gtktest --enable-expopt\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \"full \", _jsx(_components.span, {\n            className: \"token parameter variable\",\n            children: \"--prefix\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \"/usr\\n\", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"make\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"sudo\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"make\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"install\"\n          }), \"\\n\\n\", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# Getting darkice\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"wget\"\n          }), \" \", _jsx(_components.a, {\n            href: \"https://github.com/rafael2k/darkice/releases/download/v1.4/darkice-1.4.tar.gz\",\n            className: \"token url-link\",\n            children: \"https://github.com/rafael2k/darkice/releases/download/v1.4/darkice-1.4.tar.gz\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"tar\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token parameter variable\",\n            children: \"-xvf\"\n          }), \" darkice-1.4.tar.gz\\n\", _jsx(_components.span, {\n            className: \"token builtin class-name\",\n            children: \"cd\"\n          }), \" darkice-1.4\\n\\n\", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# Configuring darkice with ALSA and lame and building it\"\n          }), \"\\n./configure --with-alsa --with-lame\\n\", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"make\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"sudo\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"make\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"install\"\n          }), _jsxs(_components.span, {\n            \"aria-hidden\": \"true\",\n            className: \"line-numbers-rows\",\n            children: [_jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            })]\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"I've used the default \", _jsx(_components.strong, {\n        children: \"hackme\"\n      }), \" password when I've installed \", _jsx(_components.code, {\n        children: \"icecast2\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The config for \", _jsx(_components.code, {\n        children: \"icecast2\"\n      }), \" can be found at \", _jsx(_components.code, {\n        children: \"/etc/icecast2/icecast.xml\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The configuration for \", _jsx(_components.code, {\n        children: \"darkice\"\n      }), \" saved in \", _jsx(_components.code, {\n        children: \"~/darkice.cfg\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-bash  line-numbers\",\n        children: _jsxs(_components.code, {\n          className: \"language-bash\",\n          children: [_jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# this section describes general aspects of the live streaming session \"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), \"general\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), \" \\nduration     \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token number\",\n            children: \"0\"\n          }), \"     \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# duration of encoding, in seconds. 0 means forever \"\n          }), \"\\nbufferSecs   \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token number\",\n            children: \"5\"\n          }), \"     \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# size of internal slip buffer, in seconds \"\n          }), \"\\nreconnect    \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"yes\"\n          }), \"   \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# reconnect to the server(s) if disconnected \"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# this section describes the audio input that will be streamed \"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), \"input\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), \" \\ndevice          \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" plughw:1,0  \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# Soundcard device for the audio input \"\n          }), \"\\nsampleRate      \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token number\",\n            children: \"22050\"\n          }), \"     \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# sample rate in Hz. try 11025, 22050 or 44100 \"\n          }), \"\\nbitsPerSample   \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token number\",\n            children: \"16\"\n          }), \"        \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# bits per sample. try 16 \"\n          }), \"\\nchannel         \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token number\",\n            children: \"1\"\n          }), \"         \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# channels. 1 = mono, 2 = stereo \"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# this section describes a streaming connection to an IceCast2 server \"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# there may be up to 8 of these sections, named [icecast2-0] ... [icecast2-7] \"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), \"icecast2-0\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), \" \\nbitrateMode     \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" abr       \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# average bit rate \"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"format\"\n          }), \"          \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" mp3       \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# format of the stream: ogg vorbis \"\n          }), \"\\nbitrate         \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token number\",\n            children: \"86\"\n          }), \"        \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# bitrate of the stream sent to the server \"\n          }), \"\\nserver          \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" localhost \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# host name of the server \"\n          }), \"\\nport            \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token number\",\n            children: \"8000\"\n          }), \"      \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# port of the IceCast2 server, usually 8000 \"\n          }), \"\\npassword        \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" hackme \\nmountPoint      \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" Stream.mp3  \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# mount point of this stream on the IceCast2 server \"\n          }), \"\\nname            \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" Raspberry Pi Stream \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# name of the stream \"\n          }), \"\\ndescription     \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" Broadcast from Raspberry Pi \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# description of the stream \"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"#public          = yes       advertise this stream?\"\n          }), _jsxs(_components.span, {\n            \"aria-hidden\": \"true\",\n            className: \"line-numbers-rows\",\n            children: [_jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            })]\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"To found out the right device you can run arecord -l and will return all the\\r\\nrecording devices available. The card index is the first number, in my case 1\\r\\nand the device index is the second number, in my case 0.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The password field is the source-password from the icecast2  config.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"And now, for starting everything we need first to start icecast2 by starting\\r\\nits service:\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-bash  line-numbers\",\n        children: _jsxs(_components.code, {\n          className: \"language-bash\",\n          children: [_jsx(_components.span, {\n            className: \"token function\",\n            children: \"sudo\"\n          }), \" systemctl start icecast2\", _jsx(_components.span, {\n            \"aria-hidden\": \"true\",\n            className: \"line-numbers-rows\",\n            children: _jsx(_components.span, {\n              className: \"\"\n            })\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"And then we run darkice with our config file:\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-bash  line-numbers\",\n        children: _jsxs(_components.code, {\n          className: \"language-bash\",\n          children: [_jsx(_components.span, {\n            className: \"token function\",\n            children: \"sudo\"\n          }), \" darkice \", _jsx(_components.span, {\n            className: \"token parameter variable\",\n            children: \"-c\"\n          }), \" ~/darkice.cfg\", _jsx(_components.span, {\n            \"aria-hidden\": \"true\",\n            className: \"line-numbers-rows\",\n            children: _jsx(_components.span, {\n              className: \"\"\n            })\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"You can also create a service for darkice replacing the username with your\\r\\naccount username (line 8 and 14):\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-bash  line-numbers\",\n        children: _jsxs(_components.code, {\n          className: \"language-bash\",\n          children: [_jsx(_components.span, {\n            className: \"token comment\",\n            children: \"# /etc/systemd/system/darkice.service\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), \"Unit\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token assign-left variable\",\n            children: \"Description\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \"Darkice \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"service\"\n          }), \"\\nAfter \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" network-online.target sound.target\\n\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), \"Service\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token assign-left variable\",\n            children: \"Type\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \"simple\\n\", _jsx(_components.span, {\n            className: \"token assign-left variable\",\n            children: \"User\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \"ubuntu\\n\", _jsx(_components.span, {\n            className: \"token assign-left variable\",\n            children: \"ExecStartPre\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \"/bin/sleep \", _jsx(_components.span, {\n            className: \"token number\",\n            children: \"5\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token assign-left variable\",\n            children: \"StandardOutput\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \"syslog\\n\", _jsx(_components.span, {\n            className: \"token assign-left variable\",\n            children: \"StandardError\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \"syslog\\n\", _jsx(_components.span, {\n            className: \"token assign-left variable\",\n            children: \"SyslogIdentifier\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \"darkice\\n\", _jsx(_components.span, {\n            className: \"token assign-left variable\",\n            children: \"WorkingDirectory\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \"/\\n\", _jsx(_components.span, {\n            className: \"token assign-left variable\",\n            children: \"ExecStart\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \"/usr/local/bin/darkice \", _jsx(_components.span, {\n            className: \"token parameter variable\",\n            children: \"-c\"\n          }), \" /home/ubuntu/darkice.cfg\\n\", _jsx(_components.span, {\n            className: \"token assign-left variable\",\n            children: \"Restart\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \"on-abort\\n\", _jsx(_components.span, {\n            className: \"token assign-left variable\",\n            children: \"CPUSchedulingPolicy\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \"fifo\\n\", _jsx(_components.span, {\n            className: \"token assign-left variable\",\n            children: \"CPUSchedulingPriority\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), _jsx(_components.span, {\n            className: \"token number\",\n            children: \"4\"\n          }), \"\\n\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), \"Install\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token assign-left variable\",\n            children: \"WantedBy\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \"multi-user.target\", _jsxs(_components.span, {\n            \"aria-hidden\": \"true\",\n            className: \"line-numbers-rows\",\n            children: [_jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            }), _jsx(_components.span, {\n              className: \"\"\n            })]\n          }), \"\\n\"]\n        })\n      })\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}},"skip":null},"__N_SSG":true},"page":"/posts/[dirName]","query":{"dirName":"post009_creating_a_radio_station_on_a_raspberry_pi_using_darkice_and_icecast2"},"buildId":"7OY4XuuuRhnsG531U7OpM","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>